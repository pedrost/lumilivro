generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum OrderStatus {
  PENDING
  PAID
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
}

model Order {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Customer
  customerName  String
  customerEmail String
  customerPhone String?

  // Address
  addressLine1 String
  addressLine2 String?
  city         String
  state        String
  postalCode   String
  country      String  @default("US")

  // Product
  color       String @default("Unknown")
  productName String @default("Unknown")
  quantity    Int
  unitPrice   Int // cents
  subtotal    Int // cents
  discount    Int @default(0) // cents
  shipping    Int @default(0) // cents
  total       Int // cents

  // Payment
  stripePaymentIntent String? @unique
  paidAt              DateTime?

  // Fulfillment
  status       OrderStatus @default(PENDING)
  trackingCode String?
  notes        String?

  @@index([status])
  @@index([customerEmail])
  @@index([createdAt])
}

model Contact {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())

  name         String
  email        String
  subject      String
  orderNumber  String?
  message      String
  archived     Boolean @default(false)

  @@index([archived])
  @@index([createdAt])
}
